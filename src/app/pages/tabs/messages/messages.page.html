<div class="header d-flex">

    <ion-header>
        <div expand="full" class="toolbar d-flex justify-content-between ">
            <ion-icon
                    name="mail-outline"
                    slot="start"
                    class="p-0 m-0">
            </ion-icon>

            <h3 class="w-75 ion-padding-top"> Mesazhet</h3>

            <ion-buttons class="">
                <ion-button fill="clear" id="popover">
                    <ion-icon name="log-out-outline" size="small"></ion-icon>
                </ion-button>
            </ion-buttons>


            <ion-popover #popover trigger="popover" triggerAction="click">
                <ng-template>
                    <ion-content class="ion-padding ion-text-center" (click)="logout()">
                        <ion-label color="danger"> LOGOUT</ion-label>
                    </ion-content>
                </ng-template>
            </ion-popover>

        </div>
        <ion-segment
                class="segment-wrapper"
                [value]="segment"
                mode="md"
                (ionChange)="onSegmentChanged($event)"
        >
            <ion-segment-button value="chats">
                <ion-label>Chats</ion-label>
            </ion-segment-button>
            <ion-segment-button value="contacts">
                <ion-label>Contacts</ion-label>
            </ion-segment-button>
        </ion-segment>
    </ion-header>
</div>


<ion-content color="light" *ngIf="isLogin===true">
    <app-empty-screen *ngIf="(chatRooms | async)?.length === 0" [model]="model">
    </app-empty-screen>

    <ng-container *ngIf="segment === 'chats' && (chatRooms | async) as rooms">
        <ion-list *ngIf="rooms?.length > 0">
            <ion-list-header class="ion-padding-bottom" color="light">
                RECENT CHATS
            </ion-list-header>

            <ion-item
                    *ngFor="let item of rooms"
                    (click)="getChat(item)"
                    [detail]="true"
            >
                <ng-container *ngIf="(item?.user | async) as user">
                    <ion-avatar slot="start">
                        <img [src]="getUser(user)?.photo"/>
                    </ion-avatar>
                    <ion-label>
                        {{getUser(user)?.name}}
                        <!-- <p>
                        <ion-text>
                          message
                        </ion-text>
                      </p> -->
                    </ion-label>
                    <!-- <ion-text slot="end" color="medium">10:00 AM</ion-text> -->
                </ng-container>
            </ion-item>
        </ion-list>
    </ng-container>
</ion-content>
