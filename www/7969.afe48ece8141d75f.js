"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7969],{8426:(M,m,a)=>{a.d(m,{Q:()=>d});var t=a(5861),e=a(4650),p=a(9376),s=a(603),h=a(5146),u=a(1228),_=a(433),r=a(9062);class d{constructor(c,n,o,i){this.routerService=c,this.modalCtrl=n,this.apiService=o,this.authService=i,this.feed={tel:"",userType:"",whatsApp:"",id:"",kompania:"",vendodhja:"",pershkrim:"",tittle:"",time:new Date,userName:""}}ngOnInit(){this.feed.id=this.randomIntFromInterval(1e4,2e5).toString(),this.feed.userType=this.authService.userType,this.authService.getCurrentUser().subscribe(c=>{c&&(console.log(c,"el"),this.feed.userName=c.data().username.toString(),console.log(this.feed.userName,"feed username"))}),setTimeout(()=>{},50)}addFeed(){return this.feed.time=new Date,this.apiService.addFeed(this.feed).then(c=>{this.closeModal().then(n=>this.routerService.navigate("/tabs/landing-page"))}).catch(c=>{console.error(c)})}closeModal(){var c=this;return(0,t.Z)(function*(){yield c.modalCtrl.dismiss()})()}randomIntFromInterval(c,n){return Math.floor(Math.random()*(n-c+1)+c)}}d.\u0275fac=function(c){return new(c||d)(e.Y36(p.c),e.Y36(s.IN),e.Y36(h.s),e.Y36(u.e))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-add-feed"]],decls:44,vars:6,consts:[["color","primary",1,"main-view"],[1,"ion-text-center"],["slot","end"],["routerLink","/tabs/landing-page",3,"click"],["name","close"],[1,"modal-content","align-items-center","justify-content-center"],[1,"align-items-center","justify-content-center","ion-text-center"],["position","floating"],["type","text",3,"ngModel","ngModelChange"],["name","call-outline"],["type","tel",3,"ngModel","ngModelChange"],["name","logo-whatsapp"],["expand","none",1,"ion-margin",3,"click"],["color","danger","expand","none",1,"ion-margin",3,"click"],[1,"ion-align-items-center"]],template:function(c,n){1&c&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),e._uU(3," Shto Njoftim"),e.qZA(),e.TgZ(4,"ion-buttons",2)(5,"ion-button",3),e.NdJ("click",function(){return n.closeModal()}),e._UZ(6,"ion-icon",4),e.qZA()()()(),e.TgZ(7,"ion-content",5)(8,"ion-list",6)(9,"ion-item")(10,"ion-label",7),e._uU(11,"Titulli"),e.qZA(),e.TgZ(12,"ion-input",8),e.NdJ("ngModelChange",function(i){return n.feed.tittle=i}),e.qZA()(),e.TgZ(13,"ion-item")(14,"ion-label",7),e._uU(15,"Kompania (opsjonale)"),e.qZA(),e.TgZ(16,"ion-input",8),e.NdJ("ngModelChange",function(i){return n.feed.kompania=i}),e.qZA()(),e.TgZ(17,"ion-item")(18,"ion-label",7),e._uU(19,"Vendodhja"),e.qZA(),e.TgZ(20,"ion-input",8),e.NdJ("ngModelChange",function(i){return n.feed.vendodhja=i}),e.qZA()(),e.TgZ(21,"ion-item")(22,"ion-label",7),e._uU(23,"Pershkrim"),e.qZA(),e.TgZ(24,"ion-input",8),e.NdJ("ngModelChange",function(i){return n.feed.pershkrim=i}),e.qZA()(),e.TgZ(25,"ion-item")(26,"ion-label",7),e._UZ(27,"ion-icon",9),e._uU(28," telefon"),e.qZA(),e.TgZ(29,"ion-input",10),e.NdJ("ngModelChange",function(i){return n.feed.tel=i}),e.qZA()(),e.TgZ(30,"ion-item")(31,"ion-label",7),e._UZ(32,"ion-icon",11),e._uU(33," WhatsApp"),e.qZA(),e.TgZ(34,"ion-input",10),e.NdJ("ngModelChange",function(i){return n.feed.whatsApp=i}),e.qZA()(),e.TgZ(35,"ion-button",12),e.NdJ("click",function(){return n.addFeed()}),e._uU(36,"Shto njoftim"),e.qZA(),e._UZ(37,"br"),e.TgZ(38,"ion-button",13),e.NdJ("click",function(){return n.closeModal()}),e._uU(39,"Anullo"),e.qZA()(),e._UZ(40,"br")(41,"br")(42,"ion-item",14)(43,"br"),e.qZA()),2&c&&(e.xp6(12),e.Q6J("ngModel",n.feed.tittle),e.xp6(4),e.Q6J("ngModel",n.feed.kompania),e.xp6(4),e.Q6J("ngModel",n.feed.vendodhja),e.xp6(4),e.Q6J("ngModel",n.feed.pershkrim),e.xp6(5),e.Q6J("ngModel",n.feed.tel),e.xp6(5),e.Q6J("ngModel",n.feed.whatsApp))},dependencies:[_.JJ,_.On,s.YG,s.Sm,s.W2,s.Gu,s.gu,s.pK,s.Ie,s.Q$,s.q_,s.wd,s.sr,s.j9,s.YI,r.rH]})},5394:(M,m,a)=>{a.d(m,{F:()=>h});var t=a(4650),e=a(603),p=a(5146),s=a(433);class h{constructor(_,r){this.modalController=_,this.apiService=r}dismiss(){this.modalController.dismiss().then(_=>{})}updateFeed(){this.apiService.updateFeedFieldById(this.feed.id,this.feed),this.dismiss()}ngOnInit(){}deleteFeed(){return this.apiService.deleteFeed(this.feed.id).then(_=>{this.dismiss()})}}h.\u0275fac=function(_){return new(_||h)(t.Y36(e.IN),t.Y36(p.s))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-feed-update-modal"]],inputs:{feed:"feed"},decls:41,vars:6,consts:[["slot","end"],[3,"click"],["position","floating"],[3,"ngModel","ngModelChange"],[1,"d-flex",3,"ngModel","ngModelChange"],["name","call-outline"],["type","tel",3,"ngModel","ngModelChange"],["name","logo-whatsapp"],["expand","block",3,"click"],["color","danger","expand","none",3,"click"]],template:function(_,r){1&_&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3," Edito "),t.qZA(),t.TgZ(4,"ion-buttons",0)(5,"ion-button",1),t.NdJ("click",function(){return r.dismiss()}),t._uU(6,"Close"),t.qZA()()()(),t.TgZ(7,"ion-content")(8,"ion-list")(9,"ion-item")(10,"ion-label",2),t._uU(11,"Titulli"),t.qZA(),t.TgZ(12,"ion-input",3),t.NdJ("ngModelChange",function(l){return r.feed.tittle=l}),t.qZA()(),t.TgZ(13,"ion-item")(14,"ion-label",2),t._uU(15,"Vendodhja"),t.qZA(),t.TgZ(16,"ion-input",3),t.NdJ("ngModelChange",function(l){return r.feed.vendodhja=l}),t.qZA()(),t.TgZ(17,"ion-item")(18,"ion-label",2),t._uU(19,"Kompania"),t.qZA(),t.TgZ(20,"ion-input",3),t.NdJ("ngModelChange",function(l){return r.feed.kompania=l}),t.qZA()(),t.TgZ(21,"ion-item")(22,"ion-label",2),t._uU(23,"Pershkrim"),t.qZA(),t.TgZ(24,"ion-textarea",4),t.NdJ("ngModelChange",function(l){return r.feed.pershkrim=l}),t.qZA()(),t.TgZ(25,"ion-item")(26,"ion-label",2),t._UZ(27,"ion-icon",5),t._uU(28," telefon "),t.qZA(),t.TgZ(29,"ion-input",6),t.NdJ("ngModelChange",function(l){return r.feed.tel=l}),t.qZA()(),t.TgZ(30,"ion-item")(31,"ion-label",2),t._UZ(32,"ion-icon",7),t._uU(33," WhatsApp "),t.qZA(),t.TgZ(34,"ion-input",6),t.NdJ("ngModelChange",function(l){return r.feed.whatsApp=l}),t.qZA()(),t.TgZ(35,"ion-button",8),t.NdJ("click",function(){return r.updateFeed()}),t._uU(36,"Ruaj"),t.qZA(),t.TgZ(37,"ion-button",9),t.NdJ("click",function(){return r.dismiss()}),t._uU(38,"Anullo"),t.qZA(),t.TgZ(39,"ion-button",9),t.NdJ("click",function(){return r.deleteFeed()}),t._uU(40,"Fshi"),t.qZA()()()),2&_&&(t.xp6(12),t.Q6J("ngModel",r.feed.tittle),t.xp6(4),t.Q6J("ngModel",r.feed.vendodhja),t.xp6(4),t.Q6J("ngModel",r.feed.kompania),t.xp6(4),t.Q6J("ngModel",r.feed.pershkrim),t.xp6(5),t.Q6J("ngModel",r.feed.tel),t.xp6(5),t.Q6J("ngModel",r.feed.whatsApp))},dependencies:[s.JJ,s.On,e.YG,e.Sm,e.W2,e.Gu,e.gu,e.pK,e.Ie,e.Q$,e.q_,e.g2,e.wd,e.sr,e.j9]})},1228:(M,m,a)=>{a.d(m,{e:()=>l});var t=a(5861),e=a(4322),p=a(1135),s=a(4650),h=a(9376),u=a(7323),_=a(1205),r=a(5146),d=a(603);class l{constructor(n,o,i,g,f){this.routerService=n,this.auth=o,this.afAuth=i,this.apiService=g,this.alertController=f,this._uid=new p.X(null),this.userType="U",this.currentUserId="",this.isLogin=!1,1==this.isLogin&&this.getCurrentUser().subscribe(U=>{this.userType=U.data().userType.charAt(0).toUpperCase(),console.log(this.userType,"=usertype")}),this.checkAuth().then(U=>{this.isLogin=!0,this.getCurrentUser().subscribe(v=>{this.userType=v.data().userType.charAt(0).toUpperCase(),console.log(this.userType,"=usertype")})}).catch(U=>{this.isLogin=!1})}getCurrentUser(){if(this.getUserId(),this.auth.currentUser.uid.length>0)return console.log(this.currentUserId,"id on authService",this.auth.currentUser.uid),this.apiService.getUser(this.auth.currentUser.uid)}getUserId(){return this.afAuth.authState.subscribe(n=>{n&&(console.log(n.uid,"aush"),this.currentUserId=n.uid)}),setTimeout(()=>{},2500),this.currentUserId}getAuthState(){return this.afAuth}login(n,o){var i=this;return(0,t.Z)(function*(){try{const g=(0,e.e5)(i.auth,n,o);console.log(g),(yield g).user&&(i.setUserData((yield g).user.uid),i.isLogin=!0,i.correctUser=yield i.getUserData(i._uid),i.getCurrentUser().subscribe(f=>{i.userType=f.data().userType.charAt(0).toUpperCase(),console.log(i.userType,"=usertype"),sessionStorage.setItem("userName",f.data().username),sessionStorage.setItem("userType",i.userType),i.currentUserId=f.data().id}))}catch(g){throw i.isLogin=!1,g}})()}getId(){var n;const o=(0,e.v0)();return this.correctUser=o.currentUser,console.log(this.correctUser),null===(n=this.correctUser)||void 0===n?void 0:n.uid}setUserData(n){this._uid.next(n)}randomIntFromInterval(n,o){return Math.floor(Math.random()*(o-n+1)+n)}register(n){var o=this;return(0,t.Z)(function*(){try{const i=yield(0,e.Xb)(o.auth,n.email,n.password);console.log("perdoruesi i regjistruar : ",i);const g={id:i.user.uid,name:n.name.charAt(0).toUpperCase()+n.name.slice(1),lastName:n.lastName.charAt(0).toUpperCase()+n.lastName.slice(1),username:n.username.charAt(0).toUpperCase()+n.username.slice(1),email:n.email,userType:n.userType.charAt(0).toUpperCase()+n.userType.slice(1),profilePictureUrl:"https://i.avatar/"+o.randomIntFromInterval(200,400)};yield o.apiService.setDocument("users/".concat(i.user.uid),g)}catch(i){throw i}})()}resetUserPassword(n){var o=this;return(0,t.Z)(function*(){try{yield(0,e.LS)(o.auth,n).catch(i=>{throw i})}catch(i){throw i}})()}logout(){var n=this;return(0,t.Z)(function*(){return yield n.auth.signOut().then(o=>{n.isLogin=!1,n.userType="U",n._uid.next(null)}).catch(o=>{throw o}),!0})()}checkAuth(){return new Promise((n,o)=>{(0,e.Aj)(this.auth,i=>{n(i)})})}getUserData(n){var o=this;return(0,t.Z)(function*(){yield(yield o.apiService.getDocById("users/$(id)")).data()})()}deleteAccount(n){return this.auth.currentUser.delete().then(o=>{console.log(n,"Deleted"),this.deleteUserData(n),this.logout().then(i=>{this.routerService.navigate("/login").then(g=>{})})}).catch(o=>{this.showAlert(o.code).then(i=>{})})}showAlert(n){var o=this;return(0,t.Z)(function*(){yield(yield o.alertController.create({header:"Alert?",cssClass:"custom-alert",message:n,buttons:["OK"]})).present()})()}deleteUserData(n){this.apiService.deleteUserData(n.id).then(o=>{this.isLogin=!1,this.userType="U",this._uid.next(null),this.correctUser=null,this.apiService.deleteUserFeeds(n)})}changePass(n){return this.afAuth.currentUser.then(o=>{o.updatePassword(n).then(()=>{console.log("Password changed successfully")}).catch(i=>{console.error("Error changing password:",i)})})}}l.\u0275fac=function(n){return new(n||l)(s.LFG(h.c),s.LFG(u.gx),s.LFG(_.zQ),s.LFG(r.s),s.LFG(d.Br))},l.\u0275prov=s.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})},1565:(M,m,a)=>{a.d(m,{q:()=>u});var t=a(5439),e=a.n(t),p=a(4650),s=a(1228),h=a(5146);class u{constructor(r,d){this._authService=r,this.apiService=d,this._feedList=[],this._userType="A",this._feed={kompania:"kompanai",vendodhja:"location",id:"id",userName:"username",tittle:"tittle",pershkrim:"decr",time:new Date,userType:"type"}}get correntUser(){return this._correntUser}set correntUser(r){this._correntUser=r}get feedList(){return this._feedList}set feedList(r){this._feedList=r}get userType(){return this._userType}set userType(r){this._userType=r}get feed(){return this._feed}set feed(r){this._feed=r}get authService(){return this._authService}setSpecialistFeeds(){return console.log(this._userType),this.apiService.filterFeedData("F")}setClientFeeds(){return console.log(this._userType),this.apiService.filterFeedData("P")}addFeed(r){this.apiService.addFeed(r).then(d=>{})}updateFeedFieldById(r,d){this.apiService.updateFeedFieldById(r,d).then(l=>{})}deleteFeed(r){this.apiService.deleteFeed(r).then(d=>{})}covertDate(r){return e()(r)}getCurrentUser(){return this.authService.getCurrentUser()}}u.\u0275fac=function(r){return new(r||u)(p.LFG(s.e),p.LFG(h.s))},u.\u0275prov=p.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})},9376:(M,m,a)=>{a.d(m,{c:()=>p});var t=a(9062),e=a(4650);class p{constructor(h){this.router=h}navigate(h){return this.router.events.subscribe(u=>{u instanceof t.wM&&"administration"===u.snapshot.outlet&&this.outlet.deactivate()}),this.router.navigateByUrl(h,{replaceUrl:!0}).then(u=>{}).catch(u=>{})}navigateWithData(h,u){return this.router.events.subscribe(_=>{_ instanceof t.wM&&"administration"===_.snapshot.outlet&&this.outlet.deactivate()}),this.router.navigate(h,u).then(_=>{}).catch(_=>{})}}p.\u0275fac=function(h){return new(h||p)(e.LFG(t.F0))},p.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}}]);