"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4321],{4321:(f,g,l)=>{l.r(g),l.d(g,{FeedUpdateModalPageModule:()=>s});var e=l(6895),d=l(433),_=l(603),p=l(9062),r=l(5394),u=l(4650);const c=[{path:"",component:r.F}];class a{}a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=u.oAB({type:a}),a.\u0275inj=u.cJS({imports:[p.Bz.forChild(c),p.Bz]});class s{}s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=u.oAB({type:s}),s.\u0275inj=u.cJS({imports:[e.ez,d.u5,_.Pc,a]})},5394:(f,g,l)=>{l.d(g,{F:()=>r});var e=l(4650),d=l(603),_=l(5146),p=l(433);class r{constructor(c,a){this.modalController=c,this.apiService=a}dismiss(){this.modalController.dismiss().then(c=>{})}updateFeed(){this.apiService.updateFeedFieldById(this.feed.id,this.feed),this.dismiss()}ngOnInit(){}deleteFeed(){return this.apiService.deleteFeed(this.feed.id).then(c=>{this.dismiss()})}}r.\u0275fac=function(c){return new(c||r)(e.Y36(d.IN),e.Y36(_.s))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-feed-update-modal"]],inputs:{feed:"feed"},decls:41,vars:6,consts:[["slot","end"],[3,"click"],["position","floating"],[3,"ngModel","ngModelChange"],[1,"d-flex",3,"ngModel","ngModelChange"],["name","call-outline"],["type","tel",3,"ngModel","ngModelChange"],["name","logo-whatsapp"],["expand","block",3,"click"],["color","danger","expand","none",3,"click"]],template:function(c,a){1&c&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3," Edito "),e.qZA(),e.TgZ(4,"ion-buttons",0)(5,"ion-button",1),e.NdJ("click",function(){return a.dismiss()}),e._uU(6,"Close"),e.qZA()()()(),e.TgZ(7,"ion-content")(8,"ion-list")(9,"ion-item")(10,"ion-label",2),e._uU(11,"Titulli"),e.qZA(),e.TgZ(12,"ion-input",3),e.NdJ("ngModelChange",function(t){return a.feed.tittle=t}),e.qZA()(),e.TgZ(13,"ion-item")(14,"ion-label",2),e._uU(15,"Vendodhja"),e.qZA(),e.TgZ(16,"ion-input",3),e.NdJ("ngModelChange",function(t){return a.feed.vendodhja=t}),e.qZA()(),e.TgZ(17,"ion-item")(18,"ion-label",2),e._uU(19,"Kompania"),e.qZA(),e.TgZ(20,"ion-input",3),e.NdJ("ngModelChange",function(t){return a.feed.kompania=t}),e.qZA()(),e.TgZ(21,"ion-item")(22,"ion-label",2),e._uU(23,"Pershkrim"),e.qZA(),e.TgZ(24,"ion-textarea",4),e.NdJ("ngModelChange",function(t){return a.feed.pershkrim=t}),e.qZA()(),e.TgZ(25,"ion-item")(26,"ion-label",2),e._UZ(27,"ion-icon",5),e._uU(28," telefon "),e.qZA(),e.TgZ(29,"ion-input",6),e.NdJ("ngModelChange",function(t){return a.feed.tel=t}),e.qZA()(),e.TgZ(30,"ion-item")(31,"ion-label",2),e._UZ(32,"ion-icon",7),e._uU(33," WhatsApp "),e.qZA(),e.TgZ(34,"ion-input",6),e.NdJ("ngModelChange",function(t){return a.feed.whatsApp=t}),e.qZA()(),e.TgZ(35,"ion-button",8),e.NdJ("click",function(){return a.updateFeed()}),e._uU(36,"Ruaj"),e.qZA(),e.TgZ(37,"ion-button",9),e.NdJ("click",function(){return a.dismiss()}),e._uU(38,"Anullo"),e.qZA(),e.TgZ(39,"ion-button",9),e.NdJ("click",function(){return a.deleteFeed()}),e._uU(40,"Fshi"),e.qZA()()()),2&c&&(e.xp6(12),e.Q6J("ngModel",a.feed.tittle),e.xp6(4),e.Q6J("ngModel",a.feed.vendodhja),e.xp6(4),e.Q6J("ngModel",a.feed.kompania),e.xp6(4),e.Q6J("ngModel",a.feed.pershkrim),e.xp6(5),e.Q6J("ngModel",a.feed.tel),e.xp6(5),e.Q6J("ngModel",a.feed.whatsApp))},dependencies:[p.JJ,p.On,d.YG,d.Sm,d.W2,d.Gu,d.gu,d.pK,d.Ie,d.Q$,d.q_,d.g2,d.wd,d.sr,d.j9]})},5146:(f,g,l)=>{l.d(g,{s:()=>a});var e=l(3562),d=l(8179),_=l(4004),p=l(590),r=l(4650),u=l(1085),c=l(5552);class a{constructor(t,o,n){this.firestore=t,this.db=o,this.fireDatabase=n,this.feedsCollection=this.db.collection("feeds"),this.usersCollection=this.db.collection("users")}filterFeedData(t){return this.db.collection("feeds",o=>o.where("userType","==",t.charAt(0).toUpperCase()).orderBy("time","desc")).snapshotChanges().pipe((0,_.U)(o=>o.map(n=>(console.log(n),{id:n.payload.doc.id,...n.payload.doc.data()}))))}getDocById(t){const o=this.docRef(t);return(0,d.QT)(o)}getDocsByField(t,o,n){return this.db.collection(t,i=>i.where(o,"==",n))}filterUserByField(t,o){return this.db.collection("users",i=>i.where(t,"==",o)).valueChanges()}getUserByEmail(t){return console.log("Provided email",t),this.getDocsByField("users","email",t).snapshotChanges().pipe((0,_.U)(o=>{const n=o[0],i=n.payload.doc.data();return{id:n.payload.doc.id,name:i.name,lastName:i.lastName,username:i.username,email:i.email,userType:i.userType,password:i.password,location:i.location,profilePictureUrl:i.profilePictureUrl,pershkrim:i.pershkrim}}),(0,p.P)())}docRef(t){return(0,e.JU)(this.firestore,t)}collectionRef(t){return(0,d.hJ)(this.firestore,t)}setDocument(t,o){const n=this.docRef(t);return(0,e.pl)(n,o)}addDocument(t,o){const n=this.collectionRef(t);return(0,d.ET)(n,o)}getDocs(t,o){let n=this.collectionRef(t);return o&&(n=(0,d.IO)(n,o)),(0,d.PL)(n)}collectionDataQuery(t,o){let n=this.collectionRef(t);return o&&(n=(0,d.IO)(n,o)),(0,e.BS)(n,{idField:"id"})}docDataQuery(t,o,n){let h,i=this.docRef(t);return n&&(i=(0,d.IO)(i,n)),h=o?(0,e._1)(i,{idField:"id"}):(0,e._1)(i),h}orderByQuery(t,o="asc"){return(0,d.Xo)(t,o)}addFeed(t){d.EK.now();const n={id:t.id,kompania:t.kompania,pershkrim:t.pershkrim,tel:t.tel,time:t.time,tittle:t.tittle,userName:t.userName,userType:t.userType,vendodhja:t.vendodhja,whatsApp:t.whatsApp};return console.log(t,"add Feed method"),this.feedsCollection.doc(t.id).set(n).then(()=>{console.log("Feed updated successfully!")}).catch(i=>{console.error(i)})}updateFeedFieldById(t,o){return this.feedsCollection.doc(t).update(o).then(()=>{console.log("Feed updated successfully!")}).catch(n=>{console.error(n)})}deleteFeed(t){return this.feedsCollection.doc(t).delete().then(()=>{console.log("Feed deleted successfully!")}).catch(o=>{console.error(o)})}getFeed(t){return this.feedsCollection.doc(t).get()}updateUser(t,o){return this.usersCollection.doc(t).update(o).then(()=>{console.log("User updated successfully!")}).catch(n=>{console.error(n)})}deleteUserData(t){return this.usersCollection.doc(t).delete().then(()=>{console.log("User deleted successfully!")}).catch(o=>{console.error(o)})}getUser(t){return this.usersCollection.doc(t).get()}deleteUserFeeds(t){return this.filterFeedData(t.userType).subscribe(o=>{o.forEach(n=>{n.userName==t.username&&this.deleteFeed(n.id).then(i=>{}).catch(i=>{throw i})})})}}a.\u0275fac=function(t){return new(t||a)(r.LFG(e.gg),r.LFG(u.ST),r.LFG(c.KQ))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}}]);