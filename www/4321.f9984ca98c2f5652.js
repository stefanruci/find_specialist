"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4321],{4321:(M,g,i)=>{i.r(g),i.d(g,{FeedUpdateModalPageModule:()=>d});var e=i(6895),a=i(433),_=i(603),p=i(9062),u=i(5394),r=i(4650);const h=[{path:"",component:u.F}];let c=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=r.oAB({type:l}),l.\u0275inj=r.cJS({imports:[p.Bz.forChild(h),p.Bz]}),l})(),d=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=r.oAB({type:l}),l.\u0275inj=r.cJS({imports:[e.ez,a.u5,_.Pc,c]}),l})()},5394:(M,g,i)=>{i.d(g,{F:()=>u});var e=i(4650),a=i(603),_=i(5146),p=i(433);let u=(()=>{class r{constructor(c,d){this.modalController=c,this.apiService=d}dismiss(){this.modalController.dismiss().then(c=>{})}updateFeed(){this.apiService.updateFeedFieldById(this.feed.id,this.feed),this.dismiss()}ngOnInit(){}deleteFeed(){return this.apiService.deleteFeed(this.feed.id).then(c=>{this.dismiss()})}}return r.\u0275fac=function(c){return new(c||r)(e.Y36(a.IN),e.Y36(_.s))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-feed-update-modal"]],inputs:{feed:"feed"},decls:41,vars:6,consts:[["slot","end"],[3,"click"],["position","floating"],[3,"ngModel","ngModelChange"],[1,"d-flex",3,"ngModel","ngModelChange"],["name","call-outline"],["type","tel",3,"ngModel","ngModelChange"],["name","logo-whatsapp"],["expand","block",3,"click"],["color","danger","expand","none",3,"click"]],template:function(c,d){1&c&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3," Edito "),e.qZA(),e.TgZ(4,"ion-buttons",0)(5,"ion-button",1),e.NdJ("click",function(){return d.dismiss()}),e._uU(6,"Close"),e.qZA()()()(),e.TgZ(7,"ion-content")(8,"ion-list")(9,"ion-item")(10,"ion-label",2),e._uU(11,"Titulli"),e.qZA(),e.TgZ(12,"ion-input",3),e.NdJ("ngModelChange",function(t){return d.feed.tittle=t}),e.qZA()(),e.TgZ(13,"ion-item")(14,"ion-label",2),e._uU(15,"Vendodhja"),e.qZA(),e.TgZ(16,"ion-input",3),e.NdJ("ngModelChange",function(t){return d.feed.vendodhja=t}),e.qZA()(),e.TgZ(17,"ion-item")(18,"ion-label",2),e._uU(19,"Kompania"),e.qZA(),e.TgZ(20,"ion-input",3),e.NdJ("ngModelChange",function(t){return d.feed.kompania=t}),e.qZA()(),e.TgZ(21,"ion-item")(22,"ion-label",2),e._uU(23,"Pershkrim"),e.qZA(),e.TgZ(24,"ion-textarea",4),e.NdJ("ngModelChange",function(t){return d.feed.pershkrim=t}),e.qZA()(),e.TgZ(25,"ion-item")(26,"ion-label",2),e._UZ(27,"ion-icon",5),e._uU(28," telefon "),e.qZA(),e.TgZ(29,"ion-input",6),e.NdJ("ngModelChange",function(t){return d.feed.tel=t}),e.qZA()(),e.TgZ(30,"ion-item")(31,"ion-label",2),e._UZ(32,"ion-icon",7),e._uU(33," WhatsApp "),e.qZA(),e.TgZ(34,"ion-input",6),e.NdJ("ngModelChange",function(t){return d.feed.whatsApp=t}),e.qZA()(),e.TgZ(35,"ion-button",8),e.NdJ("click",function(){return d.updateFeed()}),e._uU(36,"Ruaj"),e.qZA(),e.TgZ(37,"ion-button",9),e.NdJ("click",function(){return d.dismiss()}),e._uU(38,"Anullo"),e.qZA(),e.TgZ(39,"ion-button",9),e.NdJ("click",function(){return d.deleteFeed()}),e._uU(40,"Fshi"),e.qZA()()()),2&c&&(e.xp6(12),e.Q6J("ngModel",d.feed.tittle),e.xp6(4),e.Q6J("ngModel",d.feed.vendodhja),e.xp6(4),e.Q6J("ngModel",d.feed.kompania),e.xp6(4),e.Q6J("ngModel",d.feed.pershkrim),e.xp6(5),e.Q6J("ngModel",d.feed.tel),e.xp6(5),e.Q6J("ngModel",d.feed.whatsApp))},dependencies:[p.JJ,p.On,a.YG,a.Sm,a.W2,a.Gu,a.gu,a.pK,a.Ie,a.Q$,a.q_,a.g2,a.wd,a.sr,a.j9]}),r})()},5146:(M,g,i)=>{i.d(g,{s:()=>c});var e=i(3562),a=i(8179),_=i(4004),p=i(590),u=i(4650),r=i(1085),h=i(5552);let c=(()=>{class d{constructor(t,o,n){this.firestore=t,this.db=o,this.fireDatabase=n,this.feedsCollection=this.db.collection("feeds"),this.usersCollection=this.db.collection("users")}filterFeedData(t){return this.db.collection("feeds",o=>o.where("userType","==",t.charAt(0).toUpperCase()).orderBy("time","desc")).snapshotChanges().pipe((0,_.U)(o=>o.map(n=>(console.log(n),Object.assign({id:n.payload.doc.id},n.payload.doc.data())))))}getDocById(t){const o=this.docRef(t);return(0,a.QT)(o)}getDocsByField(t,o,n){return this.db.collection(t,s=>s.where(o,"==",n))}getUserByEmail(t){return console.log("Provided email",t),this.getDocsByField("users","email",t).snapshotChanges().pipe((0,_.U)(o=>{const n=o[0],s=n.payload.doc.data();return{id:n.payload.doc.id,name:s.name,lastName:s.lastName,username:s.username,email:s.email,userType:s.userType,password:s.password,location:s.location,profilePictureUrl:s.profilePictureUrl,pershkrim:s.pershkrim}}),(0,p.P)())}docRef(t){return(0,e.JU)(this.firestore,t)}collectionRef(t){return(0,a.hJ)(this.firestore,t)}setDocument(t,o){const n=this.docRef(t);return(0,e.pl)(n,o)}addDocument(t,o){const n=this.collectionRef(t);return(0,a.ET)(n,o)}getDocs(t,o){let n=this.collectionRef(t);return o&&(n=(0,a.IO)(n,o)),(0,a.PL)(n)}collectionDataQuery(t,o){let n=this.collectionRef(t);return o&&(n=(0,a.IO)(n,o)),(0,e.BS)(n,{idField:"id"})}docDataQuery(t,o,n){let f,s=this.docRef(t);return n&&(s=(0,a.IO)(s,n)),f=o?(0,e._1)(s,{idField:"id"}):(0,e._1)(s),f}orderByQuery(t,o="asc"){return(0,a.Xo)(t,o)}addFeed(t){return this.feedsCollection.doc(t.id).set(t).then(()=>{console.log("Feed updated successfully!")}).catch(o=>{console.error(o)})}updateFeedFieldById(t,o){return this.feedsCollection.doc(t).update(o).then(()=>{console.log("Feed updated successfully!")}).catch(n=>{console.error(n)})}deleteFeed(t){return this.feedsCollection.doc(t).delete().then(()=>{console.log("Feed deleted successfully!")}).catch(o=>{console.error(o)})}getFeed(t){return this.feedsCollection.doc(t).get()}updateUser(t,o){return this.usersCollection.doc(t).update(o).then(()=>{console.log("User updated successfully!")}).catch(n=>{console.error(n)})}deleteUserData(t){return this.usersCollection.doc(t).delete().then(()=>{console.log("User deleted successfully!")}).catch(o=>{console.error(o)})}getUser(t){return this.usersCollection.doc(t).get()}deleteUserFeeds(t){return this.filterFeedData(t.userType).subscribe(o=>{o.forEach(n=>{n.userName==t.username&&this.deleteFeed(n.id).then(s=>{}).catch(s=>{throw s})})})}}return d.\u0275fac=function(t){return new(t||d)(u.LFG(e.gg),u.LFG(r.ST),u.LFG(h.KQ))},d.\u0275prov=u.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);